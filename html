<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>설문조사</title>
</head>
<body>
  <form id="surveyForm">
    <label>이메일:
      <input type="email" name="email" required>
    </label><br><br>

    <label>질문 1:
      <input type="text" name="q1" required>
    </label><br><br>

    <label>질문 2:
      <input type="text" name="q2" required>
    </label><br><br>

    <label>질문 3:
      <input type="text" name="q3" required>
    </label><br><br>

    <button type="submit">쿠폰 받기</button>
  </form>

  <p id="status"></p>

  <script>
    const form = document.getElementById("surveyForm");
    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = new FormData(form);
      const data = {
        email: formData.get("email"),
        q1: formData.get("q1"),
        q2: formData.get("q2"),
        q3: formData.get("q3")
      };

      try {
        const res = await fetch("https://script.google.com/macros/s/AKfycbw5q0mGmKTI1wzlGI5kSHnzUQPuFNATG6y5VTpuIkfKG6g6pxB1Xt8OZfkiVI3IYAqgFw/exec", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const result = await res.json();
        document.getElementById("status").innerText = "전송 성공! 쿠폰을 확인하세요.";
      } catch (err) {
        document.getElementById("status").innerText = "전송 실패. 다시 시도해주세요.";
        console.error(err);
      }
    });
  </script>
</body>
</html>
